<div class="page">
  <!-- Sidebar -->
  <aside class="sidebar">
    <h1>GIS Web Viewer</h1>

    <!-- <h2>{{ currentPlanet | titlecase }}</h2> -->

    <div class="planet-buttons">
      <button (click)="setPlanet('earth')" [class.active]="currentPlanet === 'earth'">Earth</button>
      <button (click)="setPlanet('moon')" [class.active]="currentPlanet === 'moon'">Moon</button>
      <button (click)="setPlanet('mars')" [class.active]="currentPlanet === 'mars'">Mars</button>
    </div>

    <!-- Layers Container -->
    <div class="overlay-panel">
      <div class="layer-actions">
        <button class="add-layer-btn">
          <span class="plus-icon">+</span> Add Data
        </button>
      </div>

      <div class="layers-list">
        @for (layer of layers; track layer.id) {
        <div class="layer-card" [class.active]="layer.visible">
          <div class="layer-header">
            <input type="checkbox" [checked]="layer.visible" (change)="toggleLayer(layer)">
            <strong>{{ layer.name }}</strong>
          </div>
          <p>{{ layer.description }}</p>
        </div>
        }
      </div>

      <!-- Planetary Stats (Pushed to bottom) -->
      <div class="stats-panel">
        <div class="stat-item">
          <span>Zoom Level</span>
          <strong>{{ zoomDisplay }}</strong>
        </div>
        <div class="stat-item">
          <span>{{ currentStats.latLabel }}</span>
          <strong>{{ currentLat }}</strong>
        </div>
        <div class="stat-item">
          <span>{{ currentStats.lonLabel }}</span>
          <strong>{{ currentLon }}</strong>
        </div>
        <div class="stat-item">
          <span>Surface Gravity</span>
          <strong>{{ currentStats.gravity }}</strong>
        </div>
      </div>
    </div>
  </aside>

  <!-- Map Area -->
  <main class="map-wrapper">
    <div #mapContainer id="mapContainer"></div>

    <!-- Loading Spinner -->
    @if (mapService.isLoading()) {
    <div class="spinner">Loading Map Data...</div>
    }
    <div id="map-container" #mapTarget></div>
  </main>
</div>